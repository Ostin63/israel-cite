const body=document.querySelector(".body"),program=body.querySelector(".program"),programButtons=program.querySelectorAll(".program__item-button"),programItems=program.querySelectorAll(".program__item"),life=body.querySelector(".life"),lifeElements=life.querySelectorAll(".life__item"),lifeButtons=life.querySelectorAll(".life__item-button"),faqItems=body.querySelectorAll(".faq__item"),headerCall=body.querySelector(".header__link--call"),modal=body.querySelector(".modal"),modalOk=body.querySelector(".modal-ok"),modalClose=modal.querySelector(".modal__close"),modalOkClose=modalOk.querySelector(".modal-ok__close"),modalOkButton=modalOk.querySelector(".modal-ok__button"),feedbackForm=body.querySelector(".details__feedback-form"),wantGoForm=body.querySelector(".want-go__form"),modalForm=body.querySelector(".modal__form"),dataSabmitUrl="https://echo.htmlacademy.ru/",getTemplateContent=(e,o)=>e.querySelector(`#${o}`).content.querySelector(`.${o}`),success=getTemplateContent(body,"alert__success"),errorLoading=getTemplateContent(body,"alert__error-loading"),successElement=success.cloneNode(!0),successErrorLoading=errorLoading.cloneNode(!0),onAddModal=()=>{modal.classList.add("active")},onRemoveModal=()=>{modal.classList.remove("active")},onRemoveModalOk=()=>{modalOk.classList.remove("active")},onAddModalOk=()=>{onRemoveModal(),modalOk.classList.add("active")},onErrorRemove=()=>{successErrorLoading.remove(),document.removeEventListener("click",onErrorRemove)},alertError=()=>{onRemoveModal(),body.append(successErrorLoading),document.addEventListener("click",onErrorRemove)},onSuccessRemove=()=>{successElement.remove(),document.removeEventListener("click",onSuccessRemove)},alertSuccess=()=>{body.append(successElement),document.addEventListener("click",onSuccessRemove)},sendData=(e,o,t,r)=>{fetch(e,{method:"POST",body:o}).then((e=>{e.ok?t():r()})).catch((()=>{r()}))},onFormSend=e=>{e.preventDefault();const o=new FormData(e.target);sendData(dataSabmitUrl,o,onAddModalOk,alertError)},onfeedbackFormSend=e=>{e.preventDefault();const o=new FormData(e.target);sendData(dataSabmitUrl,o,alertSuccess,alertError)};headerCall.addEventListener("click",onAddModal),modalClose.addEventListener("click",onRemoveModal),modalOkClose.addEventListener("click",onRemoveModalOk),modalOkButton.addEventListener("click",onRemoveModalOk),modalForm.addEventListener("submit",onFormSend),feedbackForm.addEventListener("submit",onfeedbackFormSend),wantGoForm.addEventListener("submit",onfeedbackFormSend);const switchSlides=(e,o)=>{for(let t=0;t<e.length;t++)e[t].addEventListener("click",(r=>{r.preventDefault();for(let t=0;t<e.length;t++)e[t].classList.remove("active"),o[t].classList.remove("active");e[t].classList.add("active"),o[t].classList.add("active")}))};for(let e of faqItems)e.addEventListener("click",(o=>{o.preventDefault(),document.querySelector(".faq__item--active").classList.remove("faq__item--active"),e.classList.toggle("faq__item--active")}));switchSlides(programButtons,programItems),switchSlides(lifeButtons,lifeElements),new Swiper(".swiper-container",{loop:!0,slidesPerView:1,navigation:{nextEl:".reviews__control-button--next",prevEl:".reviews__control-button--prev"},pagination:{el:".reviews__pagination",type:"fraction"}});const map=L.map("map").setView({lat:55.0285,lng:82.9281},18);L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(map);const mainPinIcon=L.icon({iconUrl:"img/marker-map.png",iconSize:[26,40],iconAnchor:[13,60]}),mainPinMarker=L.marker({lat:55.0285,lng:82.9281},{icon:mainPinIcon});mainPinMarker.addTo(map);